title:读书笔记之亿级流量网站架构核心技术（二）    
tags:[读书笔记]   
date:2017-9-18  

---  
### 连接池线程池详解 ###  
池化的目的就是通过复用技术提升性能  
#### 数据库连接池 ####  
DBCP，Druid等等  
如果并发量大：几个池大小设置为一样，禁用关闭孤儿连接，禁用定时器  
如果并发量不大：可以按需设置池大小，禁用关闭孤儿连接，启用定时器(注意MySQL空闲连接8小时自动断开)  
不管你用那种方式都要记得设置超时时间，在JVM关闭/重启时一定要销毁连接池（bean配置destroy-method=“close”）。因为如果没有加destroy-method,而且重启次数太频繁，将造成重启tomcat后旧的数据库连接池不释放。  
