title: 读书笔记之深入理解Java虚拟机：JVM高级特性与最佳实践（周志明著）（三）  
tags: [JVM,java]  
date: 2017-10-10

---  

### 内存分配与回收策略 ###  

对象的内存分配，主要分配在新生代的Eden区上，如果启动了本地线程缓冲，将按线程优先在TLAB上分配。少数情况下也可能直接分配在老年代中  

对象优先在Eden分配，当Eden区没有足够空间进行分配时，虚拟机会进行一次Minor GC  
大对象直接进入老年代  
长期存活的对象将进入老年代  

虚拟机提供了一个-XX:PretenureSizeThreshold参数，令大于这个设置值的对象直接在老年代分配，这样做的目的时避免在Eden区以及两个Survivor区之间发生大量的内存复制。新生代采用复制算法收集内存  

对象在新生代中优先分配在Eden区，如果对象躲过了Minor GC并能够被Survivor容纳将会移到Survivor区，并且对象年龄加1，当它的年龄增加到一定程度（默认15）将会被移动到老年代  
对象晋升老年代的年龄阈值，可以通过参数-XX:MaxTenuringThreshold设置  

动态对象年龄判定，虚拟机并不时永远要求达到年龄就晋升老年代的，如果在Survivor空间中相同年龄所有对象大小的总和大于Survivor空间的一半，年龄大于等于该对象年龄的对象将晋升老年代。  

### 虚拟机性能监控与故障处理工具 ###  

此章暂时未看
